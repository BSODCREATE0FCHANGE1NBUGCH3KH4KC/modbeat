// volume management (long notes fixed!)
squ0vol=[16,15,14,13,12,11,10,9,8,8,8,8,8,8,8,8]
[(t/[2,1,2,1,2,1,2,1,2,1,2,2,2,2,2][(t>>14)%16])>>9&15],
squ1vol=[15,14,13,12,11,10,9,8,8,8,8,8,8,8,8,8][((t/[2,1,2,1,2,1,2,1,2,1,2,2,2,2,2][(t>>14)%16]))>>9&15],
trivol=[16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16][t>>8&15],
noivol=[15,12.5,10,5,2.5,0,0,0,0,0,0,0,0,0,0,0][t>>8&15],


// notes
E4=10.3009375,B3=7.716875,C4=8.1759375,D4=9.176875,A3=6.875,Gmj3=6.4890625,E3=E4/2,A2=A3/2,Gmj2=Gmj3/2,


// instrument stuff
squ0=t=>(([1,1,0,0][t>>7&3]))*squ0vol*4,
squ1=t=>(([1,1,0,0][t>>7&3]))*squ1vol*4,
tri=t=>([0,.125,.25,.375,.5,.625,.75,.875,1,.875,.75,.625,.5,.375,.25,.125][t>>6&15])*trivol*4,
noi=t=>(((t-=t%32,
t*t*sin(t*t&73*t))&128)/32)*noivol,

// song initialization (tetris example)
noi(t*[0,0,32,0,0,0,32,0,0,0,32,32,0,0,32][(t>>12)%16])+

squ0(t*[E4,E4,B3,C4,D4,D4,C4,B3,A3,A3,A3,C4,E4,E4,D4,C4,B3,B3,B3,C4,D4,D4,E4,E4,C4,C4,A3,A3,A3,A3][(t>>13)%32])+

squ1(t*[0,0,0,0,Gmj3,Gmj3,0,0,0,0,0,0,A3,A3,Gmj3,Gmj3,E3,E3,E3,E3,0,0,0,0,0,0,0,0,0,0,0,0,Gmj3,Gmj3,Gmj3,Gmj3,Gmj3,Gmj3,A3,A3,B3,B3,B3,B3][(t>>12)%64])+

tri(t*[E3,E3,E4,E4,E3,E3,E4,E4,E3,E3,E4,E4,A2,A2,A3,A3,A2,A2,A3,A3,A2,A2,A3,A3,A2,A2,A3,A3,Gmj2,Gmj2,Gmj3,Gmj3,Gmj2,Gmj2,Gmj3,Gmj3,Gmj2,Gmj2,Gmj3,Gmj3,Gmj2,Gmj2,Gmj3,Gmj3,A2,A2,A3,A3,A2,A2,A3,A3,A2,A2,A3,A3,A2,A2,A3,A3][(t>>12)%64])